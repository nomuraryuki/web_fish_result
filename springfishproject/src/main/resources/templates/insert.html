<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>釣果登録</title>
    <link href="/css/commons.css" rel="stylesheet">
</head>
<body>
<th:block th:insert="common/header"></th:block>

<hr>

<div class="insert">
    <div class="discription">
        <p>
            登録情報を入力してください（<span class="required"></span>は必須です）
        </p>
    </div>

    <div class="form-body">
        <p class="error" th:text="${errorMessage}"></p>

        <form action="/insert" method="post" th:object="${addResultFishingForm}" enctype="multipart/form-data">
            <fieldset class="label-130">
                <div>
                    <label class="required">魚名</label>
                    <input type="text" th:field="*{addFishName}" name="productId" class="base-text">
                    <div class="error" th:each="error: ${#fields.errors('addFishName')}">
                        [[ ${error} ]]
                    </div>
                </div>
                <div>
                    <label class="required">サイズ</label>
                    <input type="number" th:field="*{addFishSize}" class="base-text">
                    <!--                <input type="text" name="size" title="数字のみを入力してください。" oninput="validateNumberInput(this);" class="base-text">-->
                    <div class="error" th:each="error: ${#fields.errors('addFishSize')}">
                        [[ ${error} ]]
                    </div>
                </div>
                <div>
                    <label class="required">日付</label>
                    <input type="text" th:field="*{date}" name="price" id="date" class="base-text" placeholder="yyyy-MM-ddで入力">
                    <input type="button" value="現在の日付" onclick="displayCurrentDateTime()">
                    <div class="error" th:each="error: ${#fields.errors('date')}">
                        [[ ${error} ]]
                    </div>
                </div>

<!--                <div class="date-flex">-->
<!--                    <label>日付</label>-->
<!--                    <input type="text" th:field="*{dateYear}"  placeholder="4桁の数字" class="date-text" />-->
<!--                    -<input type="text" th:field="*{dateMonth}"  placeholder="2桁の数字" class="date-text" />-->
<!--                    -<input type="text" th:field="*{dateDay}"  placeholder="2桁の数字" class="date-text" />-->
<!--                </div>-->
                <div>
                    <label>天気</label>
                    <input type="text" th:field="*{weather}" name="price" class="base-text">
                </div>
                <div class="select_block">
                    <label class="required">潮</label>
                    <select name="categoryId" class="base-text" th:field="*{tideId}">
                        <option th:each="tides : ${tideList}" th:value="${tides.id}"
                                th:text="${tides.tide_kinds}">
                        </option>
                    </select>
                </div>
                <div class="select_block">
                    <label class="required">場所</label>
                    <select name="categoryId" class="base-text" th:field="*{placeId}">
                        <option th:each="places : ${placeList}" th:value="${places.id}">[[${places.place_name}]]
                        </option>
                    </select>
                </div>
                <div>
                    <label>釣果説明</label>
                    <textarea th:field="*{addFishDescription}" name="description" class="base-text"></textarea>
                </div>
                <div>
                    <label>画像</label>
                    <input type="file" th:value="*{imgPath}" name="file" id="fileInput" multiple>
                </div>
            </fieldset>
            <div class="btns">
                <button type="button" onclick="openModal()" class="basic-btn">登録</button>
                <input type="button" onclick="location.href='/infolist'" value="戻る" class="cancel-btn">
            </div>
            <div id="modal">
                <p class="modal-message">登録しますか？</p>
                <div class="btns">
                    <button type="submit" id="register-btn" class="basic-btn">登録</button>
                    <button type="button" onclick="closeModal()" class="cancel-btn">キャンセル</button>
                </div>
            </div>
        </form>
    </div>
</div>
<div id="fadeLayer"></div>
<script src="./js/commons.js"></script>
<script>
    'use strict'
    document.getElementById('register-btn').addEventListener('click', () => {
      location.href = '/infolist'
    })
<!--    const fileInput = document.getElementById('file-input');-->
<!--    fileInput.addEventListener('change', (event) => {-->
<!--      const file = event.target.files[0];-->
<!--      const filePath = file.path; // ファイルパス-->
<!--      console.log(filePath);-->
<!--    });-->
    const fileInput = document.getElementById('fileInput');
    const selectedFilePathElement = document.getElementById('selectedFilePath');

    fileInput.addEventListener('change', (event) => {
        const selectedFile = event.target.files[0];
        if (selectedFile) {
            selectedFilePathElement.textContent = selectedFile.name;
        } else {
            selectedFilePathElement.textContent = '';
        }
    });

</script>
</body>
</html>